/**
 * Star Sea - Ship Graphics Module
 * Renders faction-specific ship designs from SVG path data
 * Converted from SVG vector graphics to Canvas 2D drawing commands
 */

class ShipGraphics {
    /**
     * Draw a ship graphic based on faction
     * @param {CanvasRenderingContext2D} ctx - Canvas context
     * @param {string} faction - Ship faction ('federation', 'trigon', 'scintilian', 'pirate')
     * @param {number} x - X position
     * @param {number} y - Y position
     * @param {number} size - Ship size (scales the graphic)
     * @param {number} rotation - Rotation in degrees
     * @param {string} color - Stroke color
     */
    static drawShip(ctx, faction, x, y, size, rotation, color = '#ffffff') {
        const scale = size / 60; // SVG designs are 120x120, centered at 60,60

        ctx.save();
        ctx.translate(x, y);
        ctx.rotate(MathUtils.toRadians(rotation));
        ctx.scale(scale, scale);
        ctx.translate(-60, -60); // Center the SVG at origin

        ctx.strokeStyle = color;
        ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
        ctx.lineWidth = 2 / scale; // Maintain consistent line width

        switch(faction.toLowerCase()) {
            case 'federation':
                this.drawFederation(ctx);
                break;
            case 'trigon':
                this.drawTrigon(ctx);
                break;
            case 'scintilian':
                this.drawScintilian(ctx);
                break;
            case 'pirate':
                this.drawPirate(ctx);
                break;
            default:
                // Fallback to simple circle
                ctx.beginPath();
                ctx.arc(60, 60, 20, 0, Math.PI * 2);
                ctx.stroke();
                break;
        }

        ctx.restore();
    }

    /**
     * Draw Federation ship (FED CS design)
     * Saucer section with engineering hull
     */
    static drawFederation(ctx) {
        const path = new Path2D("M 27.75,118.5 c -1.068249,-1.06825 -1.5,-8.81151 -1.5,-26.9018 l 0,-25.401801 -3.4375,-5.194413 c -3.091611,-4.67174 -3.43301,-6.27271 -3.392875,-15.9107 0.03422,-8.218844 0.669076,-12.09048 2.724091,-16.612821 C 25.882514,20.250725 35.270985,10.665235 43.594327,6.5777075 49.597379,3.6296567 52.177977,3.125 61.25,3.125 c 9.072023,0 11.652621,0.5046567 17.655673,3.4527075 8.323342,4.0875275 17.711813,13.6730175 21.450607,21.9007575 2.05502,4.522341 2.68987,8.393977 2.72409,16.612821 0.0401,9.63799 -0.30126,11.23896 -3.39287,15.9107 l -3.4375,5.194413 0,25.498745 c 0,21.140616 -0.320466,25.764706 -1.875,27.054856 -1.495895,1.24148 -2.254105,1.24148 -3.75,0 C 89.094115,117.47948 88.75,113.3292 88.75,96.136175 88.75,77.931761 88.495939,75.175954 86.875,75.797967 85.536116,76.311745 85,78.403484 85,83.113556 l 0,6.596085 -6.753961,2.741233 c -3.714679,1.507677 -8.219018,4.385508 -10.009643,6.39518 -4.38594,4.922466 -9.586852,4.922466 -13.972792,0 -1.790625,-2.009672 -6.268522,-4.87677 -9.950883,-6.371332 L 37.617519,89.757339 37.24626,82.789925 C 37.023642,78.612079 36.249416,75.616149 35.3125,75.307089 34.103846,74.90839 33.75,79.570941 33.75,95.895834 33.75,115.83021 33.101285,120 30,120 c -0.4125,0 -1.425,-0.675 -2.25,-1.5 z M 64.802505,91.842162 c 2.408971,-3.062511 2.420576,-3.392682 0.384416,-10.9375 -2.795092,-10.356979 -5.10176,-10.271718 -7.953179,0.293976 -2.161708,8.010026 -2.157677,8.096201 0.511584,10.9375 3.388896,3.607315 4.008734,3.581495 7.057179,-0.293976 z M 50.612293,77.551852 C 53.061478,67.557736 54.74264,65.681819 61.25,65.681819 c 6.491433,0 8.188904,1.877473 10.602646,11.726966 1.802016,7.353289 2.433734,8.4669 4.496943,7.927359 C 78.340474,84.815515 78.75,83.564435 78.75,78.003026 c 0,-6.299046 0.208314,-6.751041 3.4375,-7.458615 6.10106,-1.336852 6.5625,-1.669238 6.5625,-4.727124 0,-1.656147 0.84375,-3.711426 1.875,-4.567287 1.03125,-0.855861 1.875,-2.330986 1.875,-3.278056 0,-0.947069 0.5625,-1.721944 1.25,-1.721944 0.6875,0 1.25,-1.014281 1.25,-2.253959 0,-1.683254 -2.158839,-2.949259 -8.526184,-5 C 76.572291,45.807043 75,45.655634 75,47.891136 c 0,0.902625 -1.724435,3.29325 -3.832079,5.3125 C 68.000717,56.23801 66.279935,56.875 61.25,56.875 c -5.029935,0 -6.750718,-0.63699 -9.917921,-3.671364 C 49.224435,51.184386 47.5,48.793761 47.5,47.891136 c 0,-2.235502 -1.572291,-2.084093 -11.473816,1.104905 -6.367345,2.050741 -8.526184,3.316747 -8.526184,5 0,1.239678 0.5625,2.253959 1.25,2.253959 0.6875,0 1.25,0.774875 1.25,1.721944 0,0.94707 0.81036,2.394483 1.800799,3.216475 0.99044,0.821991 1.974815,3.000241 2.1875,4.840556 C 34.308436,68.799042 35.128077,69.482583 38.75,70 c 4.359045,0.622721 4.376359,0.65092 4.74749,7.732398 0.285012,5.438263 0.872124,7.238935 2.5,7.667498 1.17013,0.308055 2.207543,0.625352 2.305361,0.705103 0.09781,0.07975 1.137067,-3.769165 2.309442,-8.553147 z M 68.181819,49.431819 C 70.115865,47.497771 71.25,44.935466 71.25,42.5 71.25,40.064534 70.115865,37.502229 68.181819,35.568181 61.981577,29.367941 51.25,33.761406 51.25,42.5 c 0,2.435466 1.134135,4.997771 3.068181,6.931819 C 56.252229,51.365865 58.814534,52.5 61.25,52.5 c 2.435466,0 4.997771,-1.134135 6.931819,-3.068181 z m -10.631983,-3.74677 c -1.943247,-2.341469 -1.2645,-5.670748 1.512664,-7.419677 4.331121,-2.727538 9.208234,3.418634 5.887664,7.419677 -1.930763,2.326426 -5.469565,2.326426 -7.400328,0 z M 47.121603,37.329147 C 50.207546,31.102944 54.7787,28.125 61.25,28.125 c 6.4713,0 11.042454,2.977944 14.128398,9.204147 1.071491,2.161843 4.248346,4.025475 11.184102,6.560907 l 9.6875,3.541358 0,-3.48883 C 96.25,30.633666 85.175297,15.75496 72.457962,11.978317 64.04652,9.4803869 58.45348,9.4803869 50.042038,11.978317 37.544719,15.689621 26.25,30.565217 26.25,43.31338 l 0,4.118032 9.6875,-3.541358 c 6.935756,-2.535432 10.112611,-4.399064 11.184103,-6.560907 z");

        // Fill with semi-transparent color for visibility
        ctx.fillStyle = ctx.strokeStyle; // Use stroke color
        ctx.globalAlpha = 0.3;
        ctx.fill(path);
        ctx.globalAlpha = 1.0;

        // Draw thicker stroke for filled appearance
        ctx.lineWidth = 3;
        ctx.stroke(path);
    }

    /**
     * Draw Trigon ship (alien design)
     * Wide wingspan with central body
     */
    static drawTrigon(ctx) {
        const path = new Path2D("M 15.833334,119.16667 C 15.375,118.70833 15,109.40943 15,98.502436 c 0,-17.189537 0.271794,-19.935195 2.040582,-20.613942 1.122321,-0.430675 3.047457,-0.154242 4.278083,0.614296 1.971645,1.231314 2.805974,0.288605 7.021917,-7.934071 4.713743,-9.19357 7.830578,-11.954852 10.781903,-9.551952 0.826382,0.672823 3.520635,1.773757 5.987225,2.44652 3.831809,1.045129 4.697755,0.882069 5.948092,-1.12004 C 51.862662,61.054461 53.360169,60 54.385593,60 55.938197,60 56.25,57.400039 56.25,44.453642 l 0,-15.546357 -6.908845,-11.003824 C 45.54129,11.851358 42.592639,6.0671105 42.788597,5.0495778 c 1.197488,-6.2180514 33.225318,-6.2180514 34.422805,0 0.195959,1.0175327 -2.752692,6.8017802 -6.552557,12.8538832 L 63.75,28.907285 l 0,15.546357 C 63.75,57.400039 64.061802,60 65.614407,60 c 1.025424,0 2.525632,1.058787 3.333794,2.352861 1.201995,1.9247 2.170664,2.155592 5.323093,1.26881 2.119539,-0.59623 5.113866,-1.747144 6.654061,-2.557587 3.829761,-2.015203 6.190785,0.306926 11.526701,11.336811 3.526464,7.289562 4.46497,8.414716 5.65796,6.783205 0.786625,-1.075774 2.518044,-1.746456 3.847604,-1.490408 2.27316,0.437772 2.41738,1.693949 2.41738,21.056308 0,19.36236 -0.14422,20.61854 -2.41738,21.05631 -1.32956,0.25605 -3.017056,-0.3418 -3.749999,-1.32855 -0.732941,-0.98675 -6.661434,-4.93113 -13.174427,-8.7653 -11.300562,-6.65257 -11.91798,-6.86244 -13.50838,-4.59183 C 70.125959,107.11778 68.274614,107.5 60,107.5 c -8.23682,0 -10.12938,-0.38711 -11.506769,-2.3536 -1.566327,-2.23625 -2.239891,-2.00722 -13.50838,4.59324 -6.522917,3.82077 -12.309677,7.6924 -12.859464,8.60361 -1.051071,1.74204 -4.87324,2.24223 -6.292053,0.82342 z M 34.762757,101.24761 C 40.476024,97.811425 45.679149,95 46.325257,95 46.971366,95 47.5,90.814447 47.5,85.698771 47.5,80.583095 48.0625,76.049899 48.75,75.625 51.330396,74.030227 49.857556,71.553186 45.9375,70.894899 43.703125,70.519684 40.94862,69.845659 39.816379,69.397065 36.707009,68.165132 22.5,95.194947 22.5,102.34267 c 0,2.83653 0.421875,5.15626 0.9375,5.15494 0.515625,-0.001 5.611991,-2.81381 11.325257,-6.25 z M 97.5,102.9517 c 0,-6.381876 -14.695347,-34.597125 -17.44963,-33.503501 -1.058954,0.42047 -3.753495,1.071485 -5.98787,1.4467 -4.044263,0.679145 -5.69849,4.196461 -2.8125,5.980101 0.6875,0.424899 1.25,4.676845 1.25,9.448771 C 72.5,91.095697 73.013875,95 73.641944,95 c 0.628069,0 5.831194,2.793299 11.5625,6.20733 5.731306,3.41403 10.842431,6.22653 11.358056,6.25 0.515625,0.0235 0.9375,-2.00406 0.9375,-4.50563 z M 65,91.25 l 0,-8.75 -5,0 -5,0 0,8.75 0,8.75 5,0 5,0 0,-8.75 z m -2.5,-20 c 0,-2.916666 -0.555555,-3.75 -2.5,-3.75 -1.944445,0 -2.5,0.833334 -2.5,3.75 0,2.916666 0.555555,3.75 2.5,3.75 1.944445,0 2.5,-0.833334 2.5,-3.75 z M 63.994364,14.710165 C 67.797912,8.7589778 67.118049,7.5382819 60,7.5382819 c -7.005706,0 -7.673276,1.1553216 -4.132224,7.1513911 1.724843,2.920679 3.500836,5.306278 3.946651,5.301331 0.445815,-0.005 2.326787,-2.381325 4.179937,-5.280839 z");

        // Fill with semi-transparent color for visibility
        ctx.fillStyle = ctx.strokeStyle;
        ctx.globalAlpha = 0.3;
        ctx.fill(path);
        ctx.globalAlpha = 1.0;

        // Draw thicker stroke for filled appearance
        ctx.lineWidth = 3;
        ctx.stroke(path);
    }

    /**
     * Draw Scintilian ship (alien design)
     * Organic flowing design
     */
    static drawScintilian(ctx) {
        const path = new Path2D("M 57.788662,117.00936 C 56.215055,113.55567 44.488944,99.70212 31.937905,86.468564 23.964489,78.061559 23.169259,77.529524 22.258149,79.992489 21.567665,81.859046 20.406976,82.554005 18.445244,82.275454 15.628361,81.875478 15.625,81.845949 15.625,57.5 l 0,-24.375 3.125,0 c 2.842873,0 3.159472,0.53793 3.506844,5.958414 l 0.381842,5.958415 10.106211,5.081303 C 43.580894,55.571364 43.056239,55.63361 46.952839,48.4375 48.432849,45.704267 49.703964,45 53.1571,45 56.666666,45 57.5,44.52029 57.5,42.5 57.5,40.566704 56.666666,40 53.823771,40 51.801845,40 49.800441,39.438379 49.376207,38.751954 47.732522,36.092416 47.264235,20.432049 48.673185,15.241656 50.319028,9.1785834 57.892834,0 61.25,0 64.609206,0 72.182224,9.181031 73.822153,15.241656 75.527365,21.543551 74.718036,35.45243 72.489909,38.137159 71.639598,39.161721 69.606514,40 67.971944,40 65.833334,40 65,40.701 65,42.5 c 0,2.02029 0.833334,2.5 4.3429,2.5 3.453136,0 4.724251,0.704267 6.204261,3.4375 3.8966,7.19611 3.371945,7.133864 14.207941,1.685632 l 10.106212,-5.081303 0.381846,-5.958415 C 100.59053,33.66293 100.90713,33.125 103.75,33.125 l 3.125,0 0,24.375 c 0,24.345949 -0.003,24.375478 -2.82024,24.775454 -1.97328,0.28019 -3.12326,-0.418669 -3.82923,-2.32708 C 99.30535,77.460887 98.142527,78.360734 87.012894,90.172921 80.300881,97.296565 71.962315,106.92188 68.482748,111.5625 65.003179,116.20313 61.480141,120 60.653774,120 c -0.826368,0 -2.115668,-1.34579 -2.865112,-2.99064 z M 68.203128,100.04373 C 74.205619,92.792095 74.392153,92.3204 75,82.856233 75.484193,75.317359 76.047421,73.125 77.5,73.125 c 1.36064,0 2.046454,1.867522 2.5,6.807699 l 0.625,6.807698 8.412621,-9.307698 c 8.394674,-9.28784 8.405341,-9.309059 5,-9.944975 C 88.811277,66.511752 89.699582,63.201591 95.3125,62.737044 99.731145,62.371339 100,62.106018 100,58.111156 l 0,-4.23793 -9.499031,4.51107 C 79.545309,63.587116 76.077465,63.251665 71.882937,56.58334 69.48223,52.766772 69.027604,52.5963 61.25,52.5963 c -7.777604,0 -8.23223,0.170472 -10.632937,3.98704 -4.194528,6.668325 -7.662372,7.003776 -18.618032,1.800956 L 22.5,53.873226 l 0,4.23793 c 0,3.994862 0.268855,4.260183 4.6875,4.625888 5.593491,0.46294 6.502796,3.771324 1.305719,4.75068 C 25.137937,68.120006 25.178754,68.198463 33.702057,77.5 L 42.292676,86.875 42.708838,80 C 43.01712,74.907184 43.61105,73.125 45,73.125 c 1.459444,0 2.013519,2.228177 2.5,10.053594 0.618825,9.954257 0.686754,10.123926 6.875,17.171726 3.4375,3.91497 6.566408,7.12523 6.953127,7.13391 0.386722,0.009 3.480472,-3.33955 6.875001,-7.4405 z M 58.6151,94.164102 C 57.844945,92.217596 56.966541,85.5625 56.663093,79.375 55.716552,60.074518 61.088103,47.787584 64.586904,61.25 68.776893,77.371913 63.493239,106.49322 58.6151,94.164102 Z m 8.393841,-64.877737 c 1.831333,-7.296614 -2.45316,-21.3855496 -6.15111,-20.227037 -2.55622,0.8008254 -5.853862,8.840073 -5.855889,14.275938 -0.003,7.932696 0.851762,9.164734 6.357979,9.164734 4.158408,0 4.956384,-0.453956 5.64902,-3.213635 z");

        // Fill with semi-transparent color for visibility
        ctx.fillStyle = ctx.strokeStyle;
        ctx.globalAlpha = 0.3;
        ctx.fill(path);
        ctx.globalAlpha = 1.0;

        // Draw thicker stroke for filled appearance
        ctx.lineWidth = 3;
        ctx.stroke(path);
    }

    /**
     * Draw Pirate ship (raider design)
     * Aggressive angular design
     */
    static drawPirate(ctx) {
        const path = new Path2D("M 55.831786,110.41512 C 53.094348,107.67768 49.706951,96.902652 48.627853,87.5 47.957193,81.65625 46.93756,75.75 46.362001,74.375 45.686884,72.762151 41.977801,70.64403 35.909774,68.406114 30.736606,66.498225 25.806274,64.0965 24.953479,63.068946 22.960527,60.667585 25.977741,47.749439 31.076361,36.853937 34.497946,29.542179 46.674859,14.948541 51.516071,12.357603 54.420985,10.802941 57.5,12.884517 57.5,16.403056 c 0,1.774383 0.914852,2.346944 3.75,2.346944 2.835148,0 3.75,-0.572561 3.75,-2.346944 0,-3.518539 3.079015,-5.600115 5.983929,-4.045453 4.841212,2.590938 17.018125,17.184576 20.43971,24.496334 5.09862,10.895502 8.115834,23.813648 6.122882,26.215009 -0.852795,1.027554 -5.783127,3.429279 -10.956295,5.337168 -6.068027,2.237916 -9.77711,4.356037 -10.452227,5.968886 -0.575559,1.375 -1.600195,7.348507 -2.276971,13.274461 -0.729205,6.385038 -2.407398,13.259769 -4.11936,16.874999 -2.6826,5.66498 -3.248292,6.12705 -7.92311,6.47186 -2.76884,0.20422 -5.462887,-0.0573 -5.986772,-0.5812 z M 63.851939,98.4375 c 0.796565,-2.921875 2.366172,-11.16659 3.488018,-18.321589 L 69.379677,67.106822 79.811165,63.240911 90.242654,59.375 89.504148,53.945096 C 88.506531,46.610062 82.325631,34.165037 76.835641,28.4375 72.169469,23.569425 70.682556,22.884329 69.375,25 c -1.006591,1.628699 -15.243409,1.628699 -16.25,0 -1.307556,-2.115671 -2.794469,-1.430575 -7.460641,3.4375 -5.48999,5.727537 -11.67089,18.172562 -12.668507,25.507596 l -0.738506,5.429904 10.431489,3.865911 10.431487,3.865911 2.039721,13.009089 C 57.599299,95.673192 59.680505,103.75 61.25,103.75 c 0.634502,0 1.805374,-2.39062 2.601939,-5.3125 z M 58.386061,76.719395 C 57.898727,76.232061 57.5,72.19222 57.5,67.74197 c 0,-5.839532 -0.535191,-8.482705 -1.92307,-9.497546 -1.267012,-0.926463 -2.175479,-4.416918 -2.662945,-10.231406 -0.716091,-8.541534 -0.628764,-8.912623 2.716644,-11.54412 4.355511,-3.426045 6.883231,-3.426045 11.238742,0 3.345408,2.631497 3.432735,3.002586 2.716644,11.54412 -0.475107,5.667068 -1.405822,9.312176 -2.600815,10.185975 -1.263219,0.923687 -1.981269,4.141523 -2.23557,10.01838 -0.329579,7.616502 -0.681454,8.701547 -2.926069,9.022856 -1.403291,0.200875 -2.950166,-0.0335 -3.4375,-0.520834 z M 65.227442,48.125 C 67.097494,44.020685 64.86135,38.75 61.25,38.75 c -3.61135,0 -5.847494,5.270685 -3.977442,9.375 0.842405,1.848876 2.466631,3.125 3.977442,3.125 1.510811,0 3.135037,-1.276124 3.977442,-3.125 z");

        // Fill with semi-transparent color for visibility
        ctx.fillStyle = ctx.strokeStyle;
        ctx.globalAlpha = 0.3;
        ctx.fill(path);
        ctx.globalAlpha = 1.0;

        // Draw thicker stroke for filled appearance
        ctx.lineWidth = 3;
        ctx.stroke(path);
    }
}
